<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="180px" height="65px" viewBox="0 0 180 65" version="1.1" id="nordLead">
  <title>Nord Lead 2x</title>
  <description>Interactive icon by @dpskvn</description>
  <defs>
    <filter x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox" id="genericShadow">
      <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/>
      <feGaussianBlur stdDeviation="0" in="shadowOffsetOuter1" result="shadowBlurOuter1"/>
      <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.35 0" in="shadowBlurOuter1" type="matrix" result="shadowMatrixOuter1"/>
      <feMerge>
        <feMergeNode in="shadowMatrixOuter1"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <filter x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox" id="whiteKeyShadow">
      <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/>
      <feGaussianBlur stdDeviation="0" in="shadowOffsetOuter1" result="shadowBlurOuter1"/>
      <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.35 0" in="shadowBlurOuter1" type="matrix" result="shadowMatrixOuter1"/>
      <feMerge>
        <feMergeNode in="shadowMatrixOuter1"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <filter x="-50%" y="-50%" width="200%" height="200%" filterUnits="objectBoundingBox" id="blackKeyShadow">
      <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/>
      <feGaussianBlur stdDeviation="0" in="shadowOffsetOuter1" result="shadowBlurOuter1"/>
      <feColorMatrix values="0 0 0 0 0.197119473   0 0 0 0 0.197119473   0 0 0 0 0.197119473  0 0 0 0.7 0" in="shadowBlurOuter1" type="matrix" result="shadowMatrixOuter1"/>
      <feMerge>
        <feMergeNode in="shadowMatrixOuter1"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter> d
    <linearGradient x1="50%" y1="0%" x2="50%" y2="98.9317602%" id="modWheelGradient">
      <stop stop-color="#9A9A9A" offset="0%"/>
      <stop stop-color="#C3C3C3" offset="50%"/>
      <stop stop-color="#9A9A9A" offset="100%"/>
    </linearGradient>
    <linearGradient x1="3.061617e-15%" y1="50%" x2="100%" y2="50%" id="pitchGradient">
      <stop stop-color="#AC6A40" offset="0%"/>
      <stop stop-color="#945C39" offset="50%"/>
      <stop stop-color="#AC6A40" offset="100%"/>
    </linearGradient>
  </defs>
  <rect id="Synth-Front" stroke="#A33E49" fill="#8B2530" filter="url(#genericShadow)" x="0" y="58" width="180" height="5"/>
  <rect id="Synth-Body" stroke="#CC5663" fill="#CD3949" x="0" y="0" width="180" height="59"/>
  <rect id="Keys-BG" fill="#454545" x="27" y="30" width="150" height="28"/>
  <g id="Keys" transform="translate(28.000000, 23.000000)">
    <g id="White-Keys" transform="translate(0.000000, 5.000000)">
      <rect id="c" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="0" y="0" width="8" height="29" rx="2"/>
      <rect id="d" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="10" y="0" width="8" height="29" rx="2"/>
      <rect id="e" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="20" y="0" width="8" height="29" rx="2"/>
      <rect id="f" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="30" y="0" width="8" height="29" rx="2"/>
      <rect id="g" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="40" y="0" width="8" height="29" rx="2"/>
      <rect id="a" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="50" y="0" width="8" height="29" rx="2"/>
      <rect id="b" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="60" y="0" width="8" height="29" rx="2"/>
      <rect id="c2" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="70" y="0" width="8" height="29" rx="2"/>
      <rect id="d2" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="80" y="0" width="8" height="29" rx="2"/>
      <rect id="e2" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="90" y="0" width="8" height="29" rx="2"/>
      <rect id="f2" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="100" y="0" width="8" height="29" rx="2"/>
      <rect id="g2" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="110" y="0" width="8" height="29" rx="2"/>
      <rect id="a2" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="120" y="0" width="8" height="29" rx="2"/>
      <rect id="b2" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="130" y="0" width="8" height="29" rx="2"/>
      <rect id="c3" fill="#FAFAFA" filter="url(#whiteKeyShadow)" x="140" y="0" width="8" height="29" rx="2"/>
    </g>
    <g id="Black-Keys" transform="translate(6.000000, 0.000000)">
      <rect id="cs" fill="#565656" filter="url(#blackKeyShadow)" x="0" y="0" width="6" height="21" rx="2"/>
      <rect id="ds" fill="#565656" filter="url(#blackKeyShadow)" x="10" y="0" width="6" height="21" rx="2"/>
      <rect id="fs" fill="#565656" filter="url(#blackKeyShadow)" x="30" y="0" width="6" height="21" rx="2"/>
      <rect id="gs" fill="#565656" filter="url(#blackKeyShadow)" x="40" y="0" width="6" height="21" rx="2"/>
      <rect id="as" fill="#565656" filter="url(#blackKeyShadow)" x="50" y="0" width="6" height="21" rx="2"/>
      <rect id="cs2" fill="#565656" filter="url(#blackKeyShadow)" x="70" y="0" width="6" height="21" rx="2"/>
      <rect id="ds2" fill="#565656" filter="url(#blackKeyShadow)" x="80" y="0" width="6" height="21" rx="2"/>
      <rect id="fs2" fill="#565656" filter="url(#blackKeyShadow)" x="100" y="0" width="6" height="21" rx="2"/>
      <rect id="gs2" fill="#565656" filter="url(#blackKeyShadow)" x="110" y="0" width="6" height="21" rx="2"/>
      <rect id="as2" fill="#565656" filter="url(#blackKeyShadow)" x="120" y="0" width="6" height="21" rx="2"/>
    </g>
  </g>
  <rect id="Cover" fill="#CD3949" filter="url(#genericShadow)" x="27" y="4" width="150" height="26"/>
  <path d="M4,5 L4,25 L71,25 L71,5 L4,5 Z M4,25 L4,41.7675781 L24,51 L24,25 L4,25 Z" id="Highlight" fill="#2D283F"/>
  <text id="logo" font-family="Helvetica Neue" font-size="6" font-weight="bold" letter-spacing="0.300000012">
    <tspan x="136" y="24" fill="#FFFFFF">nord lead</tspan>
    <tspan x="167.876" y="24" fill="#707070"> </tspan>
    <tspan x="169.424" y="24" fill="#2D283F">2x</tspan>
  </text>
  <rect id="Gray-Highlight-2" fill="#8F898D" x="24" y="7" width="17" height="16" rx="1"/>
  <rect id="Gray-Highlight-1" fill="#8F898D" x="9" y="7" width="13" height="13" rx="1"/>
  <circle id="Pot-1" fill="#4D4D4D" cx="11.5" cy="9.5" r="1.5"/>
  <circle id="Pot-2" fill="#4D4D4D" cx="6.5" cy="9.5" r="1.5"/>
  <circle id="Pot-3" fill="#4D4D4D" cx="19.5" cy="9.5" r="1.5"/>
  <circle id="Pot-4" fill="#4D4D4D" cx="32.5" cy="10.5" r="1.5"/>
  <rect id="Gray-Highlight-3" fill="#8F898D" x="43" y="7" width="17" height="5" rx="1"/>
  <circle id="Pot-5" fill="#4D4D4D" cx="45.5" cy="9.5" r="1.5"/>
  <rect id="Gray-Highlight-4" fill="#8F898D" x="43" y="13" width="17" height="10" rx="1"/>
  <circle id="Pot-6" fill="#4D4D4D" cx="45.5" cy="15.5" r="1.5"/>
  <circle id="Pot-7" fill="#4D4D4D" cx="45.5" cy="20.5" r="1.5"/>
  <circle id="Pot-8" fill="#4D4D4D" cx="49.5" cy="20.5" r="1.5"/>
  <circle id="Pot-9" fill="#4D4D4D" cx="49.5" cy="15.5" r="1.5"/>
  <circle id="Pot-10" fill="#4D4D4D" cx="53.5" cy="15.5" r="1.5"/>
  <circle id="Pot-11" fill="#4D4D4D" cx="49.5" cy="9.5" r="1.5"/>
  <circle id="Pot-12" fill="#4D4D4D" cx="53.5" cy="9.5" r="1.5"/>
  <circle id="Pot-13" fill="#4D4D4D" cx="57.5" cy="9.5" r="1.5"/>
  <circle id="Pot-14" fill="#4D4D4D" cx="26.5" cy="14.5" r="1.5"/>
  <circle id="Pot-15" fill="#4D4D4D" cx="26.5" cy="18.5" r="1.5"/>
  <circle id="Pot-16" fill="#4D4D4D" cx="38.5" cy="18.5" r="1.5"/>
  <circle id="Pot-17" fill="#4D4D4D" cx="32.5" cy="14.5" r="1.5"/>
  <circle id="Pot-18" fill="#4D4D4D" cx="11.5" cy="13.5" r="1.5"/>
  <circle id="Pot-19" fill="#4D4D4D" cx="19.5" cy="13.5" r="1.5"/>
  <circle id="Pot-20" fill="#4D4D4D" cx="11.5" cy="17.5" r="1.5"/>
  <circle id="Pot-21" fill="#4D4D4D" cx="19.5" cy="17.5" r="1.5"/>
  <rect id="Mod-Wheel" fill="url(#modWheelGradient)" x="18" y="34" width="2" height="10" rx="8"/>
  <g id="Writing" transform="translate(62.000000, 7.000000)" fill="#D8D8D8">
    <rect id="Rectangle-37" x="0" y="0" width="7" height="1"/>
    <rect id="Rectangle-38" x="0" y="2" width="7" height="1"/>
    <rect id="Rectangle-39" x="0" y="4" width="7" height="1"/>
    <rect id="Rectangle-40" x="0" y="6" width="7" height="1"/>
    <rect id="Rectangle-41" x="0" y="8" width="7" height="1"/>
    <rect id="Rectangle-42" x="0" y="10" width="7" height="1"/>
    <rect id="Rectangle-43" x="0" y="12" width="7" height="1"/>
    <rect id="Rectangle-44" x="0" y="14" width="7" height="1"/>
  </g>
  <rect id="light" fill="#aaaaaa" x="13" y="22" width="3" height="3"/>
  <rect id="Pitch-BG" fill="#4D4D4D" x="11" y="27" width="7" height="3"/>
  <rect id="Pitch" fill="url(#pitchGradient)" x="13" y="27" width="3" height="3"/>
  <rect id="Button-1" fill="#4D4D4D" x="14" y="9" width="3" height="2"/>
  <rect id="Button-2" fill="#4D4D4D" x="37" y="10" width="3" height="2"/>
  <rect id="Button-3" fill="#4D4D4D" x="56" y="15" width="3" height="2"/>
  <rect id="Button-4" fill="#4D4D4D" x="52" y="20" width="3" height="2"/>
  <rect id="Button-5" fill="#4D4D4D" x="56" y="20" width="3" height="2"/>
  <rect id="Button-6" fill="#4D4D4D" x="37" y="14" width="3" height="2"/>
  <rect id="Button-7" fill="#4D4D4D" x="31" y="18" width="3" height="2"/>
  <rect id="Button-8" fill="#4D4D4D" x="25" y="10" width="3" height="2"/>
  <rect id="Button-9" fill="#4D4D4D" x="14" y="14" width="3" height="2"/>
  <rect id="Button-10" fill="#4D4D4D" x="5" y="13" width="3" height="2"/>
  <rect id="Button-11" fill="#4D4D4D" x="5" y="17" width="3" height="2"/>
  <rect id="Button-12" fill="#4D4D4D" x="20" y="28" width="3" height="2"/>
  <rect id="Button-13" fill="#4D4D4D" x="6" y="28" width="3" height="2"/>
  <script type="text/ecmascript"><![CDATA[
    var context;
    if(window.AudioContext) {
      context = new AudioContext();
    } else {
      context = new webkitAudioContext();
    }
    var sounds = {};
    
    function Sound(frequency) {
      this.frequency = frequency;
      this.oscillators = [];
      this.amps = [];
      this.nodes = [];
    };
    
    Sound.prototype.start = function(context) {
      // Create main mixer gain
      var mainGain = context.createGain();
      mainGain.gain.value = 0.5;
      
      // Create filter
      var filter = context.createBiquadFilter();
      filter.type = "lowpass";
      filter.frequency.value = 2000;
      filter.Q.value = 4;
      
      // Create filter envelope
      filter.frequency.setValueAtTime(500, context.currentTime);
      filter.frequency.linearRampToValueAtTime(2000, context.currentTime + 0.2);
      
      // Create and connect multiple oscillators for richness
      var osc1 = context.createOscillator();
      var osc2 = context.createOscillator();
      var osc3 = context.createOscillator();
      
      osc1.type = "sawtooth";
      osc2.type = "square";
      osc3.type = "sine";
      
      // Slightly detune oscillators for width
      osc1.frequency.value = this.frequency;
      osc2.frequency.value = this.frequency * 0.995; // Slight detune
      osc3.frequency.value = this.frequency * 2; // One octave up
      
      // Create gains for individual oscillators
      var gain1 = context.createGain();
      var gain2 = context.createGain();
      var gain3 = context.createGain();
      
      gain1.gain.value = 0.5;
      gain2.gain.value = 0.3;
      gain3.gain.value = 0.2;
      
      // Connect oscillators through their own gains
      osc1.connect(gain1);
      osc2.connect(gain2);
      osc3.connect(gain3);
      
      gain1.connect(filter);
      gain2.connect(filter);
      gain3.connect(filter);
      
      filter.connect(mainGain);
      
      // Create reverb
      var convolver = context.createConvolver();
      
      // Create a simple impulse response for reverb
      var impulseLength = context.sampleRate * 2.5; // 2.5 seconds
      var impulse = context.createBuffer(2, impulseLength, context.sampleRate);
      
      for (var channel = 0; channel < 2; channel++) {
        var impulseData = impulse.getChannelData(channel);
        for (var i = 0; i < impulseLength; i++) {
          impulseData[i] = (Math.random() * 2 - 1) * Math.pow(1 - i / impulseLength, 2);
        }
      }
      
      convolver.buffer = impulse;
      
      // Create reverb dry/wet
      var reverbGain = context.createGain();
      var dryGain = context.createGain();
      
      reverbGain.gain.value = 0.15; // Reverb level
      dryGain.gain.value = 0.85; // Dry level
      
      mainGain.connect(convolver);
      mainGain.connect(dryGain);
      convolver.connect(reverbGain);
      
      dryGain.connect(context.destination);
      reverbGain.connect(context.destination);
      
      // Improved delay with better tone
      var delay = context.createDelay();
      var delayGain = context.createGain();
      var feedback = context.createGain();
      var delayFilter = context.createBiquadFilter();
      
      delay.delayTime.value = 0.375; // Musical timing (dotted eighth)
      feedback.gain.value = 0.35;
      delayGain.gain.value = 0.2;
      
      delayFilter.type = "lowpass";
      delayFilter.frequency.value = 1800;
      
      mainGain.connect(delay);
      delay.connect(delayFilter);
      delayFilter.connect(feedback);
      feedback.connect(delay);
      delayFilter.connect(delayGain);
      delayGain.connect(context.destination);
      
      // Apply smoother volume envelope
      mainGain.gain.setValueAtTime(0, context.currentTime);
      mainGain.gain.linearRampToValueAtTime(0.8, context.currentTime + 0.05);
      
      // Start all oscillators
      osc1.start(0);
      osc2.start(0);
      osc3.start(0);
      
      // Store everything
      this.oscillators = [osc1, osc2, osc3];
      this.amps = [mainGain, delayGain, reverbGain, gain1, gain2, gain3, feedback];
      this.nodes = [filter, delay, convolver, delayFilter];
    };
    
    Sound.prototype.stop = function() {
      var now = context.currentTime;
      
      // Apply release envelope to main amp
      this.amps[0].gain.setValueAtTime(this.amps[0].gain.value, now);
      this.amps[0].gain.linearRampToValueAtTime(0, now + 0.4);
      
      // Fade out delay and reverb more slowly
      this.amps[1].gain.setValueAtTime(this.amps[1].gain.value, now);
      this.amps[1].gain.linearRampToValueAtTime(0, now + 0.8);
      this.amps[2].gain.setValueAtTime(this.amps[2].gain.value, now);
      this.amps[2].gain.linearRampToValueAtTime(0, now + 1.5);
      
      setTimeout(function() {
        this.oscillators.forEach(function(oscillator) {
          oscillator.stop(0);
        });
        
        // Disconnect all nodes to prevent memory leaks
        this.amps.forEach(function(amp) {
          amp.disconnect();
        });
        
        this.nodes.forEach(function(node) {
          node.disconnect();
        });
      }.bind(this), 1600);
    };
    
    var keys = new Array(256);
    
    keys[65] = {
      key: "c",
      frequency: 261.63
    };
    keys[87] = {
      key: "cs",
      frequency: 277.18
    };
    keys[83] = {
      key: "d",
      frequency: 293.66
    };
    keys[69] = {
      key: "ds",
      frequency: 311.13
    };
    keys[68] = {
      key: "e",
      frequency: 329.63
    };
    keys[70] = {
      key: "f",
      frequency: 349.23
    };
    keys[84] = {
      key: "fs",
      frequency: 369.99
    };
    keys[71] = {
      key: "g",
      frequency: 392.00
    };
    keys[89] = {
      key: "gs",
      frequency: 415.30
    };
    keys[72] = {
      key: "a",
      frequency: 440.00
    };
    keys[85] = {
      key: "as",
      frequency: 466.16
    };
    keys[74] = {
      key: "b",
      frequency: 493.88
    };
    keys[75] = {
      key: "c2",
      frequency: 523.25
    };
    keys[79] = {
      key: "cs2",
      frequency: 554.37
    };
    keys[76] = {
      key: "d2",
      frequency: 587.33
    };
    keys[80] = {
      key: "ds2",
      frequency: 622.25
    };
    keys[186] = {
      key: "e2",
      frequency: 659.25
    };
    keys[222] = {
      key: "f2",
      frequency: 698.46
    };
    keys[221] = {
      key: "fs2",
      frequency: 739.99
    };
    keys[220] = {
      key: "g2",
      frequency: 783.99
    };
    
    function keyDownHandler(e) {
      e.preventDefault();
      key = keys[e.keyCode];
      var el;
      if (key && !key.pressed) {
        key.pressed = true;
        el = document.getElementById(key.key);
        if (key.key[1] === "s") {
          el.style.fill = "#2B2B2B";
          el.removeAttribute("filter");
          el.setAttribute("transform", "translate(0.000000, 1.000000)");
        } else {
          el.style.fill = "#cfcfcf";
          el.removeAttribute("filter");
          el.setAttribute("transform", "translate(0.000000, 1.000000)");
        }
        var voice = new Sound(key.frequency);
        sounds[key.key] = voice;
        voice.start(context);
      }
    }
    
    function keyUpHandler(e) {
      e.preventDefault();
      key = keys[e.keyCode];
      var el;
      if (key) {
        key.pressed = false;
        el = document.getElementById(key.key);
        if (key.key[1] === "s") {
          el.style.fill = "#565656";
          el.setAttribute("filter", "url(#blackKeyShadow)");
          el.setAttribute("transform", "translate(0.000000, 0.000000)");
        } else {
          el.style.fill = "#FAFAFA";
          el.setAttribute("filter", "url(#whiteKeyShadow)");
          el.setAttribute("transform", "translate(0.000000, 0.000000)");
        }
        sounds[key.key].stop();
        delete sounds[key.key];
      }
    }
    
    document.addEventListener('keydown', keyDownHandler);
    document.addEventListener('keyup', keyUpHandler);
    
    document.getElementById("nordLead").addEventListener('focusin', function() {
      var light = document.getElementById("light");
      light.style.fill = "#75BB3F";
    });
    document.getElementById("nordLead").addEventListener('focusout', function() {
      var light = document.getElementById("light");
      light.style.fill = "#AAAAAA";
    });
  ]]></script>
</svg>
